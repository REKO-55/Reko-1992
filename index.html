<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REKO V16 - TELEGRAM CONTROL</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root { --gold: #D4AF37; --neon: #00FF00; --bg: #000; --red: #ff3333; }
        body { background-color: var(--bg); color: var(--neon); font-family: 'Segoe UI', sans-serif; text-align: center; margin: 0; padding: 10px; }
        .dev-header { border: 2px solid var(--gold); background: #000; padding: 15px; margin-bottom: 25px; box-shadow: 0 0 20px var(--gold); border-radius: 10px; }
        .dev-name { color: var(--gold); font-size: 24px; font-weight: bold; }
        .box { border: 2px solid var(--gold); padding: 25px; border-radius: 25px; background: rgba(5,5,5,0.9); max-width: 450px; margin: 15px auto; }
        input { padding: 15px; width: 85%; margin: 12px 0; border-radius: 12px; border: 1px solid #333; background: #111; color: var(--gold); text-align: center; font-size: 18px; }
        .btn-main { background: var(--gold); color: #000; padding: 18px; width: 95%; border-radius: 15px; font-weight: bold; border: none; cursor: pointer; font-size: 18px; }
        .hidden { display: none; }
        .res-display { background: #000; border: 2px solid var(--neon); padding: 25px; border-radius: 20px; font-size: 24px; margin: 20px 0; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .game-btn { background: #111; padding: 20px; border-radius: 15px; border: 1px solid #444; font-size: 24px; color: #fff; }
    </style>
</head>
<body>

    <div class="dev-header">
        <div class="dev-name">ğŸ‘‘ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø±ÙŠÙƒÙˆ Ø¨Ø±ÙŠØ¯ÙŠØªÙˆØ± ğŸ‘‘</div>
    </div>

    <div id="loginGate" class="box">
        <h2 style="color: var(--gold);">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©</h2>
        <input type="text" id="authKey" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ">
        <button class="btn-main" onclick="authorize()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
    </div>

    <div id="userInterface" class="box hidden">
        <div id="expiry" style="color:red; margin-bottom:10px;"></div>
        <div class="res-display" id="resDisplay">Ù…Ø²Ø§Ù…Ù†Ø© (0/4)</div>
        <div class="grid" id="btnGrid"></div>
    </div>

    <div id="adminConsole" class="box hidden" style="border-color: red;">
        <h2 style="color: red;">ğŸ› ï¸ Ù…ØµÙ†Ø¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ (Ø§Ù„ØªÙ„Ø¬Ø±Ø§Ù… Ù…ØªØµÙ„)</h2>
        <input type="text" id="keyName" placeholder="Ø§Ø³Ù… Ø§Ù„ÙƒÙˆØ¯">
        <input type="number" id="keyDuration" placeholder="Ø§Ù„Ù…Ø¯Ø© Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª">
        <button class="btn-main" style="background: red; color: white;" onclick="createKey()">ØªÙˆÙ„ÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„ØªÙ„Ø¬Ø±Ø§Ù…</button>
        <div id="status" style="margin-top:10px;"></div>
    </div>

    <script>
        // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø­Ø§Ø¨Ø© ÙˆØ§Ù„ØªÙ„Ø¬Ø±Ø§Ù… ---
        const config = { databaseURL: "https://reko-predator-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(config);
        const db = firebase.database();

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ„Ø¬Ø±Ø§Ù… (Ø¶Ø¹ Ø§Ù„Ù€ Token ÙˆØ§Ù„Ù€ ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§)
        const tgBotToken = "Ø¶Ø¹_Ù‡Ù†Ø§_Ø§Ù„ØªÙˆÙƒÙ†_Ø§Ù„Ø®Ø§Øµ_Ø¨Ùƒ";
        const tgChatId = "Ø¶Ø¹_Ù‡Ù†Ø§_Ø§Ù„Ø§ÙŠØ¯ÙŠ_Ø§Ù„Ø®Ø§Øµ_Ø¨Ùƒ";

        function sendTelegramMessage(text) {
            const url = `https://api.telegram.org/bot${tgBotToken}/sendMessage?chat_id=${tgChatId}&text=${encodeURIComponent(text)}`;
            fetch(url);
        }

        function authorize() {
            const key = document.getElementById('authKey').value;
            if(key === "REKO-MASTER-3000") {
                document.getElementById('loginGate').classList.add('hidden');
                document.getElementById('adminConsole').classList.remove('hidden');
                sendTelegramMessage("âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: ØªÙ… ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©!");
                return;
            }
            db.ref('active_keys/' + key).once('value').then((snap) => {
                const data = snap.val();
                if(data && new Date().getTime() < data.expiresAt) {
                    sendTelegramMessage(`âœ… Ø¯Ø®ÙˆÙ„ Ù…Ø´ØªØ±Ùƒ Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ù„ÙƒÙˆØ¯: ${key}`);
                    startApp(data.expiresAt);
                } else { alert("Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ§Ù„Ø­!"); }
            });
        }

        function createKey() {
            const name = document.getElementById('keyName').value;
            const hours = document.getElementById('keyDuration').value;
            const expireAt = new Date().getTime() + (hours * 60 * 60 * 1000);
            db.ref('active_keys/' + name).set({ expiresAt: expireAt }).then(() => {
                document.getElementById('status').innerText = "âœ… ØªÙ… ØµÙ†Ø¹ Ø§Ù„ÙƒÙˆØ¯";
                sendTelegramMessage(`ğŸ› ï¸ ØªÙ… ØµÙ†Ø¹ ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø¬Ø§Ø­:\nØ§Ù„Ø§Ø³Ù…: ${name}\nØ§Ù„Ù…Ø¯Ø©: ${hours} Ø³Ø§Ø¹Ø©`);
            });
        }

        function startApp(expiry) {
            document.getElementById('loginGate').classList.add('hidden');
            document.getElementById('userInterface').classList.remove('hidden');
            // Ø¨Ø§Ù‚ÙŠ Ù…Ø­Ø±Ùƒ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª (Ø§Ù„ÙƒØªÙƒÙˆØª ÙˆØ§Ù„Ø³Ù…ÙƒØ©) ÙŠÙˆØ¶Ø¹ Ù‡Ù†Ø§ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
            loadEngine();
        }

        function loadEngine() {
            const items = ["ğŸ¥", "ğŸŸ", "ğŸ‚", "ğŸ¤", "ğŸ…", "ğŸ¥•", "ğŸŒ¶ï¸", "ğŸŒ½"];
            const grid = document.getElementById('btnGrid');
            let history = [];
            items.forEach(item => {
                let b = document.createElement('button');
                b.className = 'game-btn'; b.innerText = item;
                b.onclick = () => {
                    history.push(item); if(history.length > 4) history.shift();
                    const disp = document.getElementById('resDisplay');
                    if(history.length < 4) disp.innerText = `Ù…Ø²Ø§Ù…Ù†Ø©: ${history.length}/4`;
                    else {
                        const r = items.sort(() => .5 - Math.random()).slice(0,4);
                        disp.innerHTML = `ğŸ¯ ${r[0]} | ${r[1]} <br> ${r[2]} | ${r[3]}`;
                    }
                };
                grid.appendChild(b);
            });
        }
    </script>
</body>
</html>
